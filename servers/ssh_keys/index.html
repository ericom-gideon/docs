<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="msvalidate.01" content="30681728D02314C28E73C01119E51FE8" />
        
        
        <link rel="canonical" href="http://help.ninefold.com/servers/ssh_keys/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>SSH Keys - Ninefold</title>

        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

       <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-20888012-1', 'auto');
            ga('send', 'pageview');

        </script>

        <script>
          (function() {
            var cx = '007510500888672052678:j-vcw1lhenu';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
        </script>

        <script type="text/javascript">
            var __lc = {};
            __lc.license = 1076997;

            (function() {
                var lc = document.createElement('script'); lc.type = 'text/javascript'; lc.async = true;
                lc.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.livechatinc.com/tracking.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(lc, s);
            })();
        </script>
        
    </head>

    <body>

        <div id="ninefold-nav" class="navbar navbar-inverse " role="navigation">
    <div class="container">
        <div class="ninefold-nav">
            <div class="navbar-header">
                <a title="Ninefold" class="mast__topbar__logo logo" href="https://ninefold.com"></a>
              
                
           
            </div>
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".nine-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div class="collapse nine-navbar-collapse navbar-collapse">
                <ul class="nav navbar-nav">
                <li>
                  <a href="https://ninefold.com/pricing">Pricing</a>
                </li>
                <li>
                  <a href="https://ninefold.com/news">News</a>
                </li>
                <li>
                  <a href="https://ninefold.com/about-us">About Us</a>
                </li>
                <li class="active">
                  <a href="http://help.ninefold.com">Docs</a>
                </li>
                <li class="signin">
                  <a href="http://portal.ninefold.com">Sign in</a>
                </li>
                </ul>
            </div>

        </div>
    </div>

</div>
<div class="main-nav">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".main-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <i class="fa fa-chevron-down"></i>
            </button>

            <!-- Main title -->
            <!-- <a class="navbar-brand" href="../..">Ninefold</a> -->
        </div>

        <!-- Expanded navigation -->
        <div class="main-navbar-collapse navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../create">Create Your Server</a>
                        </li>
                    
                        <li >
                            <a href="../new_server_username_and_password">Finding your server username and password</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_connect_to_your_server_using_ssh_rdp">Connecting to your server</a>
                        </li>
                    
                        <li >
                            <a href="../resize">Resize your server CPU and RAM</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_create_a_docker_server">Creating a Docker Server</a>
                        </li>
                    
                        <li >
                            <a href="../faq">Virtual Servers FAQ</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">App Deployment <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../apps/how_to_migrate_your_rails_app_off_of_ninefold">How to Migrate from Ninefold</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/faq_rails_us_sunset">FAQ - Rails and US sunsetting</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/what_is_a_procfile">Configuring your procfile</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/sidekiq">Implementing Sidekiq</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/deployment_with_continuous_integration_ci">Deployment with CI</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/deploying_a_rails_app_with_your_own_database">Deploying a Rails app with your own database</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/asset_precompile_on_ninefold">Asset precompilation</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/setting_up_deployment_notifications">Deployment notifications</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/zero_downtime_deployment_for_your_ninefold_rails_app">Zero downtime deployment</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/setting_and_changing_your_apps_configuration">App configuration and infrastructure</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/private_gem_repos_on_github_and_bitbucket">Private gem repos</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/what_happens_and_what_gets_built_on_a_rails_app_deployment">What happens during deployment</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/ssl_management_for_rails_apps">SSL for Rails apps</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/dns_management_for_rails_apps">DNS management for Rails apps</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/setup_elasticsearch">Setup Elasticsearch</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/adding_sendgrid_to_your_rails_app">Adding SendGrid</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/redisforapps">Redis Setup</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/creating_scheduled_tasks_in_rails">Creating scheduled tasks</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/backing_up_and_restoring_your_rails_db">Backup and restore your database</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/redeploying_an_app">Redeploying an app</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/postgres_and_postgis_and_modules">PostgreSQL, PostGIS, and PostgreSQL modules</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/how_to_utilize_a_cdn_with_ninefold">How to utilize a CDN</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/upgrading_from_rails_40_to_41">Upgrading from Rails 4.0 to 4.1</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/unicorn">Setup with Unicorn</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/puma">Setup with Puma</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/thin">Setup with Thin</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/faq">FAQ</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Virtual Servers <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../how_to_create_a_docker_server">Create a Docker Server</a>
                        </li>
                    
                        <li >
                            <a href="../create">Create a Virtual Server</a>
                        </li>
                    
                        <li >
                            <a href="../new_server_username_and_password">New server username and password</a>
                        </li>
                    
                        <li >
                            <a href="../resetting_server_password">Reset your server password</a>
                        </li>
                    
                        <li >
                            <a href="../resize">Resize your server</a>
                        </li>
                    
                        <li >
                            <a href="../liveview">Access your server with live view</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_connect_to_your_server_using_ssh_rdp">Connect using SSH / RDP</a>
                        </li>
                    
                        <li class="active">
                            <a href=".">SSH Keys</a>
                        </li>
                    
                        <li >
                            <a href="../user_data">User Data</a>
                        </li>
                    
                        <li >
                            <a href="../managing_storage_and_backups">Manage Storage & Backups</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_clone_your_server">Clone a server</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_attach_and_upload_an_iso">Upload and attach an ISO</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_create_a_template_from_your_server">Create a template from your server</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_activate_windows_server">Activate Windows Server</a>
                        </li>
                    
                        <li >
                            <a href="../microsoft_licensing_can_i_use_my_existing_software_and_licenses_on_ninefold">Microsoft licensing</a>
                        </li>
                    
                        <li >
                            <a href="../faq">FAQ</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Networking <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../networking/ninefold_net">Enable Ninefold Net</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/dns_management_for_servers">DNS management for servers</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/setup_load_balancing_single_zone">Setup load balancing</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/setting_up_static_nat_and_port_forward_for_ip_addresses">Static NAT & port forward</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_open_firewall_ports">Open firewall ports</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/disable_server_os_firewall">Disable server OS firewall</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_setup_global_load_balancing_for_servers">Global load balancing</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_delegate_your_domain_to_ninefold">Delegate your domain</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_release_or_unassign_your_ip_addresses">How to release or unassign your IP addresses</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_use_multiple_ip_addresses_on_a_server">How to use multiple IP addresses</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Accounts & Billing <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../billing/createuser">Creating additional users</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/closeaccount">How to close your account</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/faq">Billing FAQ</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../reference/support-policy">Support Policy</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/faq">General FAQ</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/API">Using the API (v2)</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/contributing">Contribute to our docs</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/faq_rails_us_sunset">FAQ - Rails and US sunsetting</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-left">
                
                
                <li>
                    <a href="#searchModal" data-toggle="modal"><i class="fa fa-search"></i></a>
 
                </li>
            
                
                <!-- 
                <li>
                    <a href="https://github.com/ninefold/docs/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                 -->
            </ul>
        </div>
    </div>
</div>

        <div class="container-fluid">
         
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#how-to-manage-ssh-keys-on-ninefold">How to manage SSH keys on Ninefold</a></li>
        
    
        <li class="main "><a href="#identifying-your-ssh-key">Identifying your SSH key</a></li>
        
    
        <li class="main "><a href="#administering-user-keys">Administering user keys</a></li>
        
    
        <li class="main "><a href="#supported-server-templates">Supported Server templates</a></li>
        
    
        <li class="main "><a href="#modifying-existing-custom-server-templates">Modifying Existing &amp; custom server templates</a></li>
        
            <li class="subsection"><a href="#ubuntu">Ubuntu</a></li>
        
            <li class="subsection"><a href="#centos">CentOS</a></li>
        
    
    </ul>
</div></div>

            <div class="col-md-9" role="main">

                <div class="col-md-12 hidden-xs hidden-sm">
                    <a href="https://github.com/ninefold/docs/tree/master/docs/servers/ssh_keys.md" class="github-btn btn btn-default pull-right"> <span class="fa fa-github"></span> Edit on GitHub</a>
                </div>
                <div class="col-md-12 hidden-xs hidden-sm"></br></div>
                
                   

<h2 id="how-to-manage-ssh-keys-on-ninefold">How to manage SSH keys on Ninefold</h2>
<p>Ninefold recently added a function to manage SSH keys. If you use one of Ninefold's standard Linux templates, we will automatically manage your keys as they are added or removed from <strong>Account Details</strong> &gt; <strong>Keys</strong>.</p>
<h2 id="identifying-your-ssh-key">Identifying your SSH key</h2>
<p>Github has a great guide on <a href="https://help.github.com/articles/generating-ssh-keys/">Locating or Generating SSH Keys</a> (steps 1 &amp; 2 only)</p>
<h2 id="administering-user-keys">Administering user keys</h2>
<p>Each user manages their own public keys on Ninefold.</p>
<ol>
<li>Click on the user account dropdown in the navigation bar and select <strong>Account Details</strong>.</li>
<li>Under <strong>keys</strong>, click <strong>Add new key</strong>.</li>
<li>Give your key a name, and copy the contents of your public key into Public key</li>
<li>Click <strong>Register Key</strong></li>
</ol>
<p><strong>NOTE:</strong>
<em>For Ninefold to be managing your SSH keys you must have an IP assigned directly to your machine, and it must be accessible over SSH on port 22. We know this doesn't convenience everyone, we're looking to other ways to improve on this in the future.</em></p>
<h2 id="supported-server-templates">Supported Server templates</h2>
<p><strong>By default all Ninefold-published linux templates from 18/03/2015 support key management.</strong> Any servers created from legacy Ninefold templates do not support this functionality. <strong>No windows templates are supported.</strong></p>
<p>We manage your keys by installing a Ninefold management public key on your server, and we populate your authorized_keys file with keys from users in your portal account.</p>
<p><strong>NOTE:</strong>
Upon deploying a new server, there will be a slight delay once the server says it has been created successfully now while the SSH keys are synched on to the VM (about a couple of minutes generally).</p>
<h2 id="modifying-existing-custom-server-templates">Modifying Existing &amp; custom server templates</h2>
<p><strong>If you have brought a linux ISO or VHD to Ninefold</strong> then we can still manage your keys for you, although there are a few things you'll need to do to make this work.</p>
<p>The functionality only works if a specific cloud init script is installed on your servers. The location and procedure differs a little per operating system.</p>
<h3 id="ubuntu">Ubuntu</h3>
<ul>
<li>sudo -i</li>
<li>Add in the <strong>cloud-set-guest-sshkey</strong> script to <em>/etc/init.d</em> (get it <a href="https://github.com/ninefold/customer-scripts/blob/master/cloud-set-guest-sshkey-Ubuntu">here</a>)</li>
<li>run</li>
</ul>
<pre><code>/etc/init.d/update-rc.d cloud-set-guest-sshkey defaults
/etc/init.d/chmod +x cloud-set-guest-sshkey
</code></pre>

<p><strong>(Optional)</strong> To enable passwordless sudo; add the following to the end of /etc/sudoers: </p>
<pre><code>user ALL=(ALL) NOPASSWD: ALL
</code></pre>

<ul>
<li>reboot</li>
</ul>
<h3 id="centos">CentOS</h3>
<ul>
<li>Add in the <strong>cloud-set-guest-sshkey</strong> script to <em>/etc/init.d</em> (get it <a href="https://github.com/ninefold/customer-scripts/blob/master/cloud-set-guest-sshkey-CentOS">here</a>)</li>
<li>run </li>
</ul>
<pre><code> /etc/init.d/chmod +x cloud-set-guest-sshkey
</code></pre>

<ul>
<li>Create the following file in /var/lib/systemd/system and populate with:</li>
</ul>
<pre><code># cloud-set-guest-password.service

      [Unit]
      Description=Cloudstack set guest password
      After=network.target

      [Service]
      Type=simple
      User=root
      Group=root
      ExecStart=/etc/init.d/cloud-set-guest-password start
      Type=forking

      # Give a reasonable amount of time for the server to start up/shut down
      TimeoutSec=300

      [Install]
      WantedBy=multi-user.target 
</code></pre>

<ul>
<li>Run the following:</li>
</ul>
<pre><code>    # Install the above systemd service (this will make it start on boot)
    systemctl enable cloud-set-guest-password.service

    # Start the service manually (good for testing during template creation)
    systemctl start cloud-set-guest-password.service

    # Get the status of the service (good for testing during template creation)
    systemctl status cloud-set-guest-password.service
</code></pre>

<ul>
<li>reboot</li>
</ul>


</br></br></br></br>
            </div>
        </div>

        <div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="searchModalLabel">Documentation search</h4>
      </div>
      <div class="modal-body">

        <form onsubmit="return executeQuery();" id="cse-search-box-form-id">
          <input type="search" class="form-control" id="cse-search-input-box-id" placeholder="Search">
        </form>

        <script type="text/javascript">
          function executeQuery() {
            var input = document.getElementById('cse-search-input-box-id');
            var element = google.search.cse.element.getElement('searchresults-only0');
            if (input.value == '') {
              element.clearAllResults();
            } else {
              element.execute(input.value);
            }
            return false;
          }
        </script>


        <gcse:searchresults-only></gcse:searchresults-only>
       
      </div>
    </div>
  </div>
</div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>