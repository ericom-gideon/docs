<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="msvalidate.01" content="30681728D02314C28E73C01119E51FE8" />
        
        
        <link rel="canonical" href="http://help.ninefold.com/getstarted/how_to_utilize_ninefold_logging/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>Ninefold logging - Ninefold</title>

        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

       <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-20888012-1', 'auto');
            ga('send', 'pageview');

        </script>

        <script>
          (function() {
            var cx = '007510500888672052678:j-vcw1lhenu';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
        </script>

        <script type="text/javascript">
            var __lc = {};
            __lc.license = 1076997;

            (function() {
                var lc = document.createElement('script'); lc.type = 'text/javascript'; lc.async = true;
                lc.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.livechatinc.com/tracking.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(lc, s);
            })();
        </script>
        
    </head>

    <body>

        <div id="ninefold-nav" class="navbar navbar-inverse " role="navigation">
    <div class="container">
        <div class="ninefold-nav">
            <div class="navbar-header">
                <a title="Ninefold" class="mast__topbar__logo logo" href="https://ninefold.com"></a>
              
                
           
            </div>
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".nine-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div class="collapse nine-navbar-collapse navbar-collapse">
                <ul class="nav navbar-nav">
                <li>
                  <a href="https://ninefold.com/pricing">Pricing</a>
                </li>
                <li>
                  <a href="https://ninefold.com/performance">Performance</a>
                </li>
                <li>
                  <a href="https://ninefold.com/testimonials">Testimonials</a>
                </li>
                <li>
                  <a href="https://ninefold.com/news">News</a>
                </li>
                <li>
                  <a href="https://ninefold.com/blog">Blog</a>
                </li>
                <li>
                  <a href="https://ninefold.com/about-us">About Us</a>
                </li>
                <li class="active">
                  <a href="http://help.ninefold.com">Docs</a>
                </li>
                <li class="signin">
                  <a href="http://portal.ninefold.com">Sign in</a>
                </li>
                </ul>
            </div>

        </div>
    </div>

</div>
<div class="main-nav">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".main-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <i class="fa fa-chevron-down"></i>
            </button>

            <!-- Main title -->
            <!-- <a class="navbar-brand" href="../..">Ninefold</a> -->
        </div>

        <!-- Expanded navigation -->
        <div class="main-navbar-collapse navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../how_to_deploy_an_app">Deploy an app</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_install_and_utilize_the_cli">Utilize the CLI</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_migrate_from_heroku">Migrating from Heroku</a>
                        </li>
                    
                        <li >
                            <a href="../how_ninefold_works_with_github_bitbucket_and_git_url">GitHub, Bitbucket and Git URL</a>
                        </li>
                    
                        <li class="active">
                            <a href=".">Ninefold logging</a>
                        </li>
                    
                        <li >
                            <a href="../exporting_and_importing_postgresql_data">Exporting and importing PostgreSQL data</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_deploy_diaspora">Deploy Diaspora</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">App Deployment <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../apps/what_is_a_procfile">Configuring your procfile</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/deployment_with_continuous_integration_ci">Deployment with CI</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/deploying_a_rails_app_with_your_own_database">Deploying a Rails app with your own database</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/asset_precompile_on_ninefold">Asset precompilation</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/setting_up_deployment_notifications">Deployment notifications</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/zero_downtime_deployment_for_your_ninefold_rails_app">Zero downtime deployment</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/setting_and_changing_your_apps_configuration">App configuration and infrastructure</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/private_gem_repos_on_github_and_bitbucket">Private gem repos</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/what_happens_and_what_gets_built_on_a_rails_app_deployment">What happens during deployment</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/ssl_management_for_rails_apps">SSL for Rails apps</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/dns_management_for_rails_apps">DNS management for Rails apps</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/setup_elasticsearch">Setup Elasticsearch</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/adding_sendgrid_to_your_rails_app">Adding SendGrid</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/redisforapps">Redis Setup</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/creating_scheduled_tasks_in_rails">Creating scheduled tasks</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/backing_up_and_restoring_your_rails_db">Backup and restore your database</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/redeploying_an_app">Redeploying an app</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/postgres_and_postgis_and_modules">PostgreSQL, PostGIS, and PostgreSQL modules</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/how_to_utilize_a_cdn_with_ninefold">How to utilize a CDN</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/upgrading_from_rails_40_to_41">Upgrading from Rails 4.0 to 4.1</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/unicorn">Setup with Unicorn</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/puma">Setup with Puma</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/thin">Setup with Thin</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/faq">FAQ</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Servers <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../servers/how_to_create_a_docker_server">Docker containers</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/create">Create a server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/resize">Resize your server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/liveview">Access your server with live view</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_clone_your_server">Clone a server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_attach_and_upload_an_iso">Upload and attach an ISO</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_create_a_template_from_your_server">Create a template from your server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/moving">Copying or moving servers between regions</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_add_storage_volumes">Add storage volumes</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_view_attached_and_detached_storage_volumes">View attached/detached storage volumes</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_detach_then_reattach_a_storage_volume">Detach then reattach a storage volume</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/using_backups_to_protect_your_data">Using backups to protect your data</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/new_server_username_and_password">New server username and password</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/resetting_server_password">Reset your server password</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_connect_to_your_server_using_ssh_rdp">Connect using SSH / RDP</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_activate_windows_server">Activate Windows Server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/microsoft_licensing_can_i_use_my_existing_software_and_licenses_on_ninefold">Microsoft licensing</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/faq">FAQ</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Networking <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../networking/ninefold_net">Enable Ninefold Net</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/dns_management_for_servers">DNS management for servers</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/setup_load_balancing_single_zone">Setup load balancing</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/setting_up_static_nat_and_port_forward_for_ip_addresses">Static NAT & port forward</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_open_firewall_ports">Open firewall ports</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/disable_server_os_firewall">Disable server OS firewall</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_setup_global_load_balancing_for_servers">Global load balancing</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_delegate_your_domain_to_ninefold">Delegate your domain</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_release_or_unassign_your_ip_addresses">How to release or unassign your IP addresses</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_use_multiple_ip_addresses_on_a_server">How to use multiple IP addresses</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Accounts & Billing <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../billing/freetrial">Free trial</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/createuser">Creating additional users</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/closeaccount">How to close your account</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/faq">Billing FAQ</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../reference/faq">FAQ</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/apdex">Apdex to measure user satisfaction</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/API">Using the API (v2)</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/contributing">Contribute to our docs</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-left">
                
                
                <li>
                    <a href="#searchModal" data-toggle="modal"><i class="fa fa-search"></i></a>
 
                </li>
            
                
                <!-- 
                <li>
                    <a href="https://github.com/ninefold/docs/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                 -->
            </ul>
        </div>
    </div>
</div>

        <div class="container-fluid">
         
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#how-to-utilize-ninefold-rails-logging">How to utilize Ninefold Rails logging</a></li>
        
            <li class="subsection"><a href="#portal">Portal</a></li>
        
            <li class="subsection"><a href="#cli">CLI</a></li>
        
            <li class="subsection"><a href="#common-deployment-mistakes">Common Deployment Mistakes</a></li>
        
    
    </ul>
</div></div>

            <div class="col-md-9" role="main">

                <div class="col-md-12 hidden-xs hidden-sm">
                    <a href="https://github.com/ninefold/docs/tree/master/docs/getstarted/how_to_utilize_ninefold_logging.md" class="github-btn btn btn-default pull-right"> <span class="fa fa-github"></span> Edit on GitHub</a>
                </div>
                <div class="col-md-12 hidden-xs hidden-sm"></br></div>
                
                   

<h2 id="how-to-utilize-ninefold-rails-logging">How to utilize Ninefold Rails logging</h2>
<p>Ninefold is awfully proud of our logging system. If you want to learn how it works, check out this <a href="https://ninefold.com/blog/2014/06/25/managing-logs-and-why-elasticsearch-is-amazing/">blog post</a>.</p>
<p>When your app is initially deployed, redeployed and serves your visitors, we're constantly logging information for you via the Ninefold Portal and CLI.</p>
<p><em>It's Log, Log, it's big, it's heavy, it's wood.</em><br />
<em>It's Log, Log, it's better than bad, it's good!</em><br />
<em>Everyone wants a log! You're gonna love it, Log!</em><br />
<em>Come on and get your log! Everyone needs a Log!</em></p>
<p>This <a href="https://www.youtube.com/watch?v=2C7mNr5WMjA">song</a> will be stuck in your head as you read on about Ninefold's Rails logging.</p>
<h4 id="portal">Portal</h4>
<p>You can view your most recent logs by clicking on your <strong>Dashboard</strong> &gt; <strong>Your App</strong> &gt; <strong>Logs</strong> tab.</p>
<p><strong>Sources</strong></p>
<p>The sources drop-down will reveal the different types of logs to review.</p>
<p><img alt="Source Logging" src="../../../../img/sourcelog.png" /></p>
<p>Logging will default to show <strong>All</strong> sources (except Cheflog). The most popular ones for troubleshooting are:</p>
<ul>
<li><em>Apache</em> - to check if the app serves a 500 error</li>
<li><em>Asset</em> - to view asset precompilation</li>
<li><em>Bundler</em> - to view bundle install  </li>
<li><em>Cheflog</em> - to track the app deployment overall</li>
<li><em>Rails</em> -  to view real-time rails logs</li>
<li><em>Trigger</em> - to verify pre and post migration commands and cron logging (if enabled)</li>
<li><em>Worker</em> - to verify background worker tasks are running (ex. delayed_job, Resque, Sidekiq)  </li>
</ul>
<p><strong>Deployments</strong></p>
<p>Also in the <strong>Sources</strong> drop-down, you'll see the five most recent deployments within the past two - three days. To narrow the logs to a specific deployment, make sure to select that deployment only.</p>
<p><strong>Hosts</strong></p>
<p>The Hosts (aka the servers) drop-down will reveal all of the servers that your app is deployed on. This will default to <strong>All</strong> but selecting individual servers is helpful when troubleshooting a trouble host.</p>
<p><img alt="Host" src="../../../../img/host.png" /></p>
<p><strong>Search</strong></p>
<p>Ninefold logging is powered with Elasticsearch. Plug in your search term and press return to search the currently selected logs.</p>
<p><strong>Deployment &amp; Redeployment</strong></p>
<p>During deployment and redeployment, the app dashboard will change to have only two tabs: <strong>Deployment</strong> and <strong>Logs</strong>.</p>
<p><img alt="Deploy Log" src="../../../../img/deploylog.png" /></p>
<p>Navigate to the <strong>Logs</strong> tab to watch the deployment run. Your deployment is complete when you see something similar to the following on each server when you select <strong>Cheflog</strong>:</p>
<pre><code>client.log  INFO: Chef Run complete in 96.997723217 seconds
client.log  INFO: Running report handlers
client.log  INFO: Report handlers complete
</code></pre>
<h4 id="cli">CLI</h4>
<p>Have you installed the CLI yet? If not, Brutus the Yak is waiting for you to read over this <a href="http://help.ninefold.com/getstarted/how_to_install_and_utilize_the_cli/">guide</a>. There is a special section dedicated to logging.</p>
<h4 id="common-deployment-mistakes">Common Deployment Mistakes</h4>
<p>Ninefold Rails Support Engineers are the masters of finding deployment errors. Here are some that are easy to spot in the logs (either Portal or the CLI):</p>
<p><strong>Rails logs not showing</strong></p>
<p>Check to see if you have the rails_12factor gem. If yes, please remove it, bundle locally and then redeploy.</p>
<p>We ask that this gem is removed because it installs 2 subsequent gems:</p>
<p>rails_stdouting which sends logs to STDOUT</p>
<p>rails_serve_static_assets which sets config.serve_static_assets = true</p>
<p>Neither of these gems are necessary with Ninefold. We handle your logging merrily for you.</p>
<p><strong>Migrations, Assets and Bundler</strong></p>
<p>Customers will see the following failed deployment error from Cheflog:</p>
<pre><code>FATAL: Ninefold::Handler::Communicator Your app deployment on app-domain-spam-checker-master-fce0 failed for the following reason:
==&gt; Chef::Exceptions::Exec: deploy_revision[domain-spam-checker] (/var/chef/cache/cookbooks/application/providers/default.rb line 122) had an error: Chef::Exceptions::Exec: bash -o pipefail -c '(RAILS_ENV=production /usr/local/bin/bundle exec rake db:migrate --trace) 2&gt;&amp;1 | ts '[%FT%T%z]' | tee -a /var/www/apps/domain-spam-checker/shared/log/migration.log' ## &amp;&amp; rake db:migrate returned 1, expected 0 &lt;==
</code></pre>
<p>'rake db:migrate returned 1, expected 0' means that you need to click on <strong>Sources</strong> and select the <strong>Migration</strong> log. Scroll through these logs and look for the <code>rake aborted!</code> error. A similar error will occur with <strong>Asset</strong> and <strong>Bundler</strong>.</p>
<p><strong>Gemfile.lock</strong></p>
<p>If you change your Gemfile and forget to bundle locally, logging will display this error:</p>
<pre><code>client.log  ERROR: deploy_revision[10420] (/var/chef/cache/cookbooks/application/providers/default.rb line 122) had an error: Mixlib::ShellOut::ShellCommandFailed: ninefold_app_shellout[run bundle command] (/var/chef/cache/cookbooks/ninefold_app/definitions/ninefold_app_bundle_install.rb line 138) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '16'
---- Begin output of bash -o pipefail -c 'RAILS_ENV=production /usr/local/bin/bundle install --path=vendor/bundle --deployment --without development test cucumber staging --jobs 4 --retry 0 2&gt;&amp;1 | ts "[%FT%T%z]"' ----
STDOUT: [2014-09-29T16:19:17+0000] Don't run Bundler as root. Bundler can ask for sudo if it is needed, and
client.log  installing your bundle as root will break this application for all non-root
client.log  users on this machine.
client.log  You are trying to install in deployment mode    after changing
client.log  your Gemfile. Run `bundle install` elsewhere and add the
client.log  updated Gemfile.lock to version control.
</code></pre>
<p>Bundle locally, recommit and redeploy the app.</p>
<p><strong>Postgres &amp; bringing your own database</strong></p>
<p>Another easy error to spot is database issues.</p>
<pre><code>migration.log /var/www/apps/odotracker/releases/2f51979991b0dde203cce663a4fe1fcc2ce771a1/vendor/bundle/ruby/2.1.0/bin/rake:23:in `&lt;main&gt;'
migration.log   Gem::LoadError: pg is not part of the bundle. Add it to Gemfile.
</code></pre>
<p>If your app utilizes Ninefold's database servers, the PG gem will need to be added to the Gemfile, bundled locally, committed and redeployed.</p>
<p>Sometimes customers have the intention of bringing their own database (MySQL, MongoDB) and have made a mistake on the implementation so the PG gem error will occur.</p>
<p>We recommend destroying the app and starting over again following this <a href="http://help.ninefold.com/apps/deploying_a_rails_app_with_your_own_database/">guide</a>.</p>


</br></br></br></br>
            </div>
        </div>

        <div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="searchModalLabel">Documentation search</h4>
      </div>
      <div class="modal-body">

        <form onsubmit="return executeQuery();" id="cse-search-box-form-id">
          <input type="search" class="form-control" id="cse-search-input-box-id" placeholder="Search">
        </form>

        <script type="text/javascript">
          function executeQuery() {
            var input = document.getElementById('cse-search-input-box-id');
            var element = google.search.cse.element.getElement('searchresults-only0');
            if (input.value == '') {
              element.clearAllResults();
            } else {
              element.execute(input.value);
            }
            return false;
          }
        </script>


        <gcse:searchresults-only></gcse:searchresults-only>
       
      </div>
    </div>
  </div>
</div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>